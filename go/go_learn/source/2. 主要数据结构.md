### Array

#### 1. 创建

```go
// 创建
var mm = new([4]int64)
mm[1] = 1

// 汇编语句
0x0065 00101 (main.go:7)	LEAQ	type.[4]int64(SB), AX
0x006c 00108 (main.go:7)	CALL	runtime.newobject(SB)
0x0071 00113 (main.go:7)	MOVQ	AX, "".mm+56(SP)
0x0076 00118 (main.go:8)	MOVQ	$1, 8(AX)

// 找到runtime.newobject()函数
// malloc.go文件下的newobject(
func newobject(typ *_type) unsafe.Pointer {
	return mallocgc(typ.size, typ, true)
}
```

看到的: 

1. 编译期间的数组类型由[`cmd/compile/internal/types.NewArray`](https://draveness.me/golang/tree/cmd/compile/internal/types.NewArray) 函数生成的

   ```go
   // NewArray returns a new fixed-length array Type.
   func NewArray(elem *Type, bound int64) *Type {
   	if bound < 0 {
   		base.Fatalf("NewArray: invalid bound %v", bound)
   	}
     // 创建一个 *types.Type 的指针
   	t := New(TARRAY)
   	t.Extra = &Array{Elem: elem, Bound: bound}
   	t.SetNotInHeap(elem.NotInHeap())
   	if elem.HasTParam() {
   		t.SetHasTParam(true)
   	}
   	return t
   }
   ```

   ?????? 我没看懂这篇, 他讲的好像是array要有一个/gc里面的东西初始化, 应该是编译阶段的, 但我还不懂编译如何弄.  https://draveness.me/golang/docs/part2-foundation/ch03-datastructure/golang-array/





## Map































