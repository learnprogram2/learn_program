### 170. eshop单体项目拆分成微服务的步骤

1. 把单体仓库拆分成多个工程
2. 各个服务暴露交互接口, 基于spring-cloud调用接口
3. 每个项目配置连接自己的DB
4. 单元测试, 接口mock数据.
5. 每个项目测试+集成测试.
6. 上传到代码仓库. 



### 171. 分布式电商系统-动手拆分15个服务和抽出一个基础库

引入spring-boot, 约定版本号.

拆分代码



### 172. 基于spring-cloud改造服务-API接口定义-高内聚低耦合

1. **每个服务暴露的API, 连带Domain类 独立包装成一个jar项目**

2. 需要其他服务的API, 就引入依赖, 然后添加想要调用的API的feignClient.

#### **高内聚, 低耦合**: 服务内能干的事情就自己干, 服务细节尽量少的依赖别人.

- OrderInfoDTO: **订单信息的domain类可以每个服务自己定义, 不然会出现API依赖中修改domain类, 导致其他所有服务报错, 违反高内聚低耦合**. 但是流处理里面avro交流的话, 更容易前后兼容.

- **服务内高度自治, 对其他的API的响应可以建立自己的domian类.** 
  - 方便: 每个服务可以很好管理自己的依赖.
  - 不方便: 如果A服务接收B1和B2相应的同一个domain类, 可能会出现多次convert.麻烦容易错.
  - **优化: 对于使用频率高的domian, 统一管理. 少用的, 每个服务自己管理**
- 









## 单元测试通过184-190

服务A要获得服务B的数据, 绝对不能跨DB查询, 必须通过API.































